# Quickstart

This quickstart outlines how to deploy the appropriate contracts for resolving an ENS domain from one of our supported [chains](./chains).

First checkout the repo: `https://github.com/unruggable-labs/unruggable-gateways.git`

## Deploy a data contract

This contract gets deployed to the L2 rollup of your choice.

Replace `YOUR-ADDRESS-HERE` with your desired resolution address.

```solidity filename="L2DataContract.sol"
//SPDX-License-Identifier: MIT
pragma solidity ^0.8.25;

contract L2DataContract {
    address slot0 = "YOUR-ADDRESS-HERE";
}
```

Replace the placeholders in the following deployment command.

```bash
forge create --rpc-url https://CHAIN-IDENTIFIER.g.alchemy.com/v2/YOUR-API-KEY --private-key YOUR-PRIVATE-KEY contracts/L2DataContract.sol:L2DataContract
```

## Deploy a resolver

This should be deployed to L1 Ethereum mainnet.

```solidity filename="L1SimpleResolver.sol"
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.25;

import {GatewayFetchTarget, IGatewayProofVerifier} from "@unruggable/gateways/contracts/GatewayFetchTarget.sol";
import {GatewayFetcher, GatewayRequest} from "@unruggable/gateways/contracts/GatewayFetcher.sol";

contract SimpleResolver is GatewayFetchTarget {
	using GatewayFetcher for GatewayRequest;
	IGatewayProofVerifier immutable _verifier;
	address immutable _target;

	constructor(IGatewayProofVerifier verifier, address target) {
		_verifier = verifier;
		_target = target;
	}

	function addressCallback(bytes[] memory m, uint8, bytes memory) external pure returns (string memory) {
		return address(m[0]);
	}

	function resolve(bytes32 node) public view returns (address) {
		GatewayRequest memory r = GatewayFetcher.newRequest(1).setTarget(_target);
		r.setSlot(1).readBytes().setOutput(0);
		fetch(_verifier, r, this.addressCallback.selector, '');
	}
}
```

Replace the placeholders in the following deployment command.

The `VERIFIER-ADDRESS` for your chosen L2 chain can be found [here](/verifier-deployments).

```bash
forge create --rpc-url https://eth-mainnet.g.alchemy.com/v2/YOUR-API-KEY --private-key YOUR-PRIVATE-KEY contracts/L1SimpleResolver.sol:L1SimpleResolver
```

## Set your resolver

Set the resolver for your ENS name to the address of the deployed L1 Resolver.

You can do this through the [ENS App](https://app.ens.domains/) 

![Update resolver using the ENS App](/images/docs/update-resolver-ens-app.png)

Alternatively you can use the following command having replaced the placeholders.

```bash
cast send 0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e "setResolver(bytes32,address)" $(cast namehash "MY-ENS-NAME") RESOLUTION-ADDRESS --private-key YOUR-PRIVATE-KEY --rpc-url https://eth-mainnet.g.alchemy.com/v2/YOUR-API-KEY
```